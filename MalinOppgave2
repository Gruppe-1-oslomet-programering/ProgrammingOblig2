package oblig2;

import static javax.swing.JOptionPane.*;


class Tallspill
{
    int gjetning;
    int antall;
    int tall;
    boolean firstGuess = true;
    String innTall;

    public int nyttTall() {
        // Trekker og returnerer et slumptall mellom 0 og 200.
        // Tips bruk : (int) (Math.random() * 201), som gir verdier mellom 0 og 200
        gjetning = (int) (Math.random()*11);
        return gjetning;
    }

    //Skjønner ikke hva denne skal brukes til:
    public void visMelding(String melding){
        // Viser parameterens innhold i en meldingsboks.
        showMessageDialog(null,melding);
    }


    private void forLite(int tall){
    /* Viser melding om at parameterens verdi er for
       lite tall og ber spilleren prøve igjen. */
        showMessageDialog(null,tall+" er for lite! Prøv igjen!");


    }

    private void forStort(int tall) {
    /* Viser melding om at parameterens verdi er for
      stort tall og ber spilleren prøve igjen. */
        showMessageDialog(null,tall+" er for stort! Prøv igjen!");
    }

    public void avsluttRunde(int antall, int randomNummer) {
    /* Viser melding om at det ble gjettet riktig
      og antall gjetninger som ble brukt.
      Parametrene gir opplysninger om dette. */
        showMessageDialog(null, randomNummer+
                " er riktig!\nDu gjettet riktig på "+antall+" forsøk.");
    }

    private void reset(){
        this.antall = 0;
        firstGuess = true;
    }
    public void kjørSpill() {
    /* Kjører en spillrunde ved å trekke et tall,
      nullstille tellevariabel, innhente gjentatte
      gjetninger fra bruker inntil det gjettes riktig.
      Når det skjer, avsluttes runden med passe
      meldinger til spilleren. */

        reset();
        nyttTall();

        while(firstGuess) {
            innTall = showInputDialog("Jeg tenker på et tall mellom 0 og 200.\nPrøv å gjette på tallet:");
            try {
                tall = Integer.parseInt(innTall);
                firstGuess = false;
            } catch (Exception e){
                System.out.print(e);
                visMelding("Feil i input. Prøv igjen");
                firstGuess = true;
            }
        }


            while (tall!=gjetning) {
                if (tall < gjetning) {
                    antall++;
                    forLite(tall);
                    innTall = showInputDialog("Nytt forsøk:");
                    try {
                        tall = Integer.parseInt(innTall);
                    } catch (Exception e) {
                        System.out.print(e);
                        visMelding("Feil i input. Prøv igjen");
                        antall--;
                    }
                } else if (tall > gjetning) {
                    antall++;
                    forStort(tall);
                    innTall = showInputDialog("Nytt forsøk:");
                    try {
                        tall = Integer.parseInt(innTall);
                    } catch (Exception e) {
                        System.out.print(e);
                        visMelding("Feil i input. Prøv igjen");
                        antall--;
                    }
                }
            }

            if (tall == gjetning){
                antall++;
                avsluttRunde(antall, gjetning);
            }

        }

    }


public class Oppgave2 {
    public static void main (String [] args){
        Tallspill spill = new Tallspill();
        String [] jaNei = {"Ja", "Nei"};
        boolean restart = true;
        while (restart) {
            int svar = showOptionDialog(null, "Vill du spille et spill?", "Gjett nummret",
                    YES_NO_OPTION, QUESTION_MESSAGE, null, jaNei, jaNei[0]);
            if (svar == YES_OPTION) {
                spill.kjørSpill();
            }
            else if (svar == NO_OPTION) {
                restart = false;
            }
        }


    }
}
